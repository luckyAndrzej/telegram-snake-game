# Исправление 502 ошибки на Railway

## Проблема
Railway получает 502 ошибку, потому что веб-сервер не отвечает правильно.

## Решение

### 1. Проверьте Start Command в Railway

В настройках Railway (Settings → Service → Start Command) должно быть:
```
python run.py
```

### 2. Убедитесь, что PORT используется правильно

Railway предоставляет PORT через переменную окружения. Код теперь использует:
```python
port = int(os.getenv("PORT", "5000"))
app.run(host='0.0.0.0', port=port)
```

### 3. Проверьте логи Railway

Откройте логи в Railway и проверьте:
- "Bot thread starting..." - бот запускается
- "Web App API starting on 0.0.0.0:XXXX" - Flask запускается на правильном порту
- Нет ошибок при запуске

### 4. Убедитесь, что оба процесса запускаются

Код запускает:
- Telegram бота в отдельном потоке (daemon thread)
- Flask веб-приложение в основном потоке

### 5. Если проблема сохраняется

Проверьте переменные окружения в Railway:
- `TELEGRAM_BOT_TOKEN` - установлен
- `PORT` - автоматически устанавливается Railway
- `WEB_APP_URL` - опционально, для Mini App

